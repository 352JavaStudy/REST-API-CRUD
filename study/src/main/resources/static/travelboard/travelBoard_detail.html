<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>게시판 디테일</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<h1>게시판 디테일</h1>
<div>
    <h3>ID: <span id="travelId"></span></h3>
    <h3>작성자: <span id="travelMemberId"></span></h3>
    <h3>제목: <span id="travelTitle"></span></h3>
    <p>내용:</p>
    <div id="travelContent"></div>
    <h3>작성일: <span id="travelCreatedAt"></span></h3>
    <button class="btn btn-primary" id="updateButton">수정하기</button>
    <button class="btn btn-primary" id="deleteButton">삭제하기</button>
</div>

<script>
    const url = window.location.href;
    const id = url.substring(url.lastIndexOf('/') + 1);

    fetch(`http://localhost:8080/api/travelboards/${id}`)
        .then(response => response.json())
        .then(board => {
            document.getElementById('travelId').textContent = board.travelId;
            document.getElementById('travelMemberId').textContent = board.travelMemberId;
            document.getElementById('travelTitle').textContent = board.travelTitle;
            document.getElementById('travelContent').textContent = board.travelContent;
            document.getElementById('travelCreatedAt').textContent = board.travelCreatedAt;
        })
        .catch(error => console.error('Error fetching board:', error));


    document.getElementById('updateButton').addEventListener('click', function() {
        window.location.href = `/travelboards/update/${id}`
    });
    document.getElementById('deleteButton').addEventListener('click', function () {
        fetch(`http://localhost:8080/api/travelboards/deleteBoard/${id}`, {
            method: 'DELETE'
        })
            .then(response => {
                console.log('글 삭제 성공');
                window.location.href = `/travelboards`;
            })
            .catch(error => {
                console.error('글 삭제 오류:', error);
            });
    });
</script>

</body>
</html>
